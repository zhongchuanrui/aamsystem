<!DOCTYPE html >
<html>

<head>

<meta http-equiv="Cache-Control" content="no-siteapp" />
<link href="assets/css/bootstrap.min.css" rel="stylesheet" />
<link rel="stylesheet" href="css/style.css" />
<link href="assets/css/codemirror.css" rel="stylesheet">
<link rel="stylesheet" href="assets/css/ace.min.css" />
<link rel="stylesheet" href="font/css/font-awesome.min.css" />

<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/typeahead-bs2.min.js"></script>
<script src="assets/js/jquery.dataTables.min.js"></script>
<script src="assets/js/jquery.dataTables.bootstrap.js"></script>
<script type="text/javascript" src="js/H-ui.js"></script>
<script type="text/javascript" src="js/H-ui.admin.js"></script>
<script src="assets/layer/layer.js" type="text/javascript"></script>
<script src="assets/laydate/laydate.js" type="text/javascript"></script>
<title>分类管理</title>
</head>

<body>
	<div class="page-content clearfix">
		<div class="sort_style">

			<div class="search_style">
				<div class="title_names">搜索查询</div>

				<ul class="search_content clearfix">

					<li style="line-height: 50px;"><label class="l_f">省份:&nbsp;&nbsp;&nbsp;</label>
						<select name="s_session" class="text_add" id="association_province"
						style="width: 200px; text-align: center;">
							<option value="">---请选择省份---</option>
							<option value="广东省">广东省</option>
							<option value="北京市">北京市</option>
							<option value="天津市">天津市</option>
							<option value="上海市">上海市</option>
							<option value="重庆市">重庆市</option>
							<option value="河北省">河北省</option>
							<option value="河南省">河南省</option>
							<option value="云南省">云南省</option>
							<option value="辽宁省">辽宁省</option>
							<option value="黑龙江省">黑龙江省</option>
							<option value="湖南省">湖南省</option>
							<option value="安徽省">安徽省</option>
							<option value="山东省">山东省</option>
							<option value="新疆维吾尔">新疆维吾尔</option>
							<option value="江苏省">江苏省</option>
							<option value="浙江省">浙江省</option>
							<option value="江西省">江西省</option>
							<option value="湖北省">湖北省</option>
							<option value="广西壮族">广西壮族</option>
							<option value="甘肃省">甘肃省</option>
							<option value="山西省">山西省</option>
							<option value="内蒙古">内蒙古</option>
							<option value="陕西省">陕西省</option>
							<option value="吉林省">吉林省</option>
							<option value="福建省">福建省</option>
							<option value="贵州省">贵州省</option>
							<option value="青海省">青海省</option>
							<option value="西藏">西藏</option>
							<option value="四川省">四川省</option>
							<option value="宁夏回族">宁夏回族</option>
							<option value="海南省">海南省</option>
							<option value="台湾省">台湾省</option>
							<option value="香港特别行政区">香港特别行政区</option>
							<option value="澳门特别行政区">澳门特别行政区</option>
					</select> <!--<input name="" style="width: 200px;" type="" class="text_add" placeholder="输入校友手机号码" />-->
					</li>
					<li style="line-height: 50px;"><button type="button" id="searchbutton"
							class="btn_search">
							<i class="icon-search"></i>查询
						</button></li>

				</ul>
			</div>

			<div class="sort_list">
				<table class="table table-striped table-bordered table-hover"
					id="sample-table">
					<thead>
						<tr>
							<th width="25px"><label><input type="checkbox"
									class="ace"><span class="lbl"></span></label></th>
							<th width="50px">ID</th>
							<th width="100px">会长</th>
							<th width="200px">校友会名称</th>
							<th width="100px">创立时间</th>
							<th width="80px">所在省会</th>
							<th width="280px">详细地址</th>
							<th width="70px">人数</th>
							<th width="160px">操作</th>
						</tr>
					</thead>
					<tbody>						
						
					</tbody>
				</table>
			</div>
		</div>
	</div>

	<!--添加用户图层-->
	<div class="add_menber" id="add_menber_style" style="display: none">
		<ul class=" page-content">
			<li><label class="label_name">申请编号：</label><span
				class="add_name"><input value="" name="用户名" type="text"
					readonly="readonly" class="text_add" /></span>
				<div class="prompt r_f"></div></li>
			<li><label class="label_name">真实姓名：</label><span
				class="add_name"><input name="真实姓名" type="text"
					class="text_add" /></span>
				<div class="prompt r_f"></div></li>
			<li><label class="label_name">申请时间：</label><span
				class="add_name"><input name="固定电话" type="text"
					class="text_add" /></span>
				<div class="prompt r_f"></div></li>
			<li><label class="label_name">申请校友会：</label><span
				class="add_name"><input name="真实姓名" type="text"
					class="text_add" /></span>
				<div class="prompt r_f"></div></li>
			<li><label class="label_name">届别：</label><span class="add_name"><input
					value="" name="用户名" type="text" class="text_add" /></span>
				<div class="prompt r_f"></div></li>
			<li><label class="label_name">班级：</label><span class="add_name"><input
					name="真实姓名" type="text" class="text_add" /></span>
				<div class="prompt r_f"></div></li>
			<li><label class="label_name">备注：</label><span class="add_name"><input
					name="真实姓名" type="text" class="text_add" /></span>
				<div class="prompt r_f"></div></li>
			<li><label class="label_name">回复人：</label><span class="add_name"><input
					name="固定电话" type="text" class="text_add" /></span>
				<div class="prompt r_f"></div></li>
			<li><label class="label_name">审核时间：</label><input
				class="inline laydate-icon" id="start" style="margin-left: 10px;">
				<div class="prompt r_f"></div></li>
			<li><label class="label_name">回复情况：</label><span
				class="add_name"><input name="电子邮箱" type="text"
					class="text_add" /></span>
				<div class="prompt r_f"></div></li>
			<li><label class="label_name">是否通过：</label> <span
				class="add_name"><label><input
						name="form-field-radio1" type="radio" checked="checked"
						class="ace"><span class="lbl">通过</span></label>&nbsp;&nbsp;&nbsp;
					<label><input name="form-field-radio1" type="radio"
						class="ace"><span class="lbl">未通过</span></label></span> </span></li>
			<li><label class="label_name">备注：</label>
				<div class="col-sm-9">
					<textarea name="分类说明" class="form-control" id="form-field-8"
						placeholder="" onkeyup="checkLength(this);"></textarea>
					<span class="wordage">剩余字数：<span id="sy" style="color: Red;">200</span>字
					</span>
				</div></li>

		</ul>
	</div>

</body>

</html>
<script>
	jQuery(function($) {
		
		var oTable1 = $('#sample-table').dataTable({
			"aaSorting": [[1, "desc"]], //默认第几个排序
			"searching": false, //右边输入框关闭
			"bStateSave": true, //状态保存
			"ajax": {
	            "url": "http://localhost:8080/aamsystem/alumnusassociation/getallAssociation",
	            "dataSrc": ""
	        },
	        "columns": [
				{
				    "sClass": "text-center",
				    "data": "ID",
				    "render": function (data, type, full, meta) {
				        return '<label><input type="checkbox" class="ace"><span class="lbl"></span></label>';
				    },
				    "bSortable": false
				},
	            { "data": "association_id" },
	            { "data": "association_chairman" },
	            { "data": "association_name" },
	            { "data": "association_createtime" },
	            { "data": "association_province" },
	            { "data": "association_address" },
	            { "data": "association_number" }
	        ],
			"aoColumnDefs": [
				//{"bVisible": false, "aTargets": [ 3 ]} //控制列的隐藏显示
				{ "orderable": false, "aTargets": [ 0, 2, 3, 4, 5, 6, 7, 8 ] }, // 制定列不参与排序
				{
                    "targets":8,
                    "class": "td-manage",
                    "data": null,
                    "bSortable": false,
                    "defaultContent": "<a title='查看' href='javascript:;' class='showinfo btn btn-xs btn-info'><i class='fa fa-eye  bigger-120'></i></a>",
                } 
			]
		});
		
		
		/*校友-查看*/
		$('#sample-table').on('click','.showinfo', function() {
			var table = $('#sample-table').DataTable();
			    var data = table.row($(this).parents('tr')).data();
			    var str="alumnus_id="+data.alumnus_id
			    +"&alumnus_nickname="+data.alumnus_nickname
			    +"&alumnus_name="+data.alumnus_name
			    +"&alumnus_session="+data.alumnus_session
			    +"&alumnus_birthday="+data.alumnus_birthday
			    +"&alumnus_sex="+data.alumnus_sex
			    +"&alumnus_introduce="+data.alumnus_introduce
			    +"&alumnus_weixin="+data.alumnus_weixin
			    +"&alumnus_qq="+data.alumnus_qq
			    +"&alumnus_telephone="+data.alumnus_telephone
			    +"&alumnus_major="+data.alumnus_major
			    +"&alumnus_class="+data.alumnus_class
			    +"&alumnus_graduationtime="+data.alumnus_graduationtime
			    +"&alumnus_mastermajor="+data.alumnus_mastermajor
			    +"&alumnus_masteryear="+data.alumnus_masteryear
			    +"&alumnus_address="+data.alumnus_address
			    +"&alumnus_workplace="+data.alumnus_workplace
			    +"&alumnus_workpost="+data.alumnus_workpost;			   
			//    console.debug(str);
			member_show(data.alumnus_name,'member-show.jsp',str,'500','400');
		});
		
		/*用户-查看*/
		function member_show(title,url, id, w, h) {
			 console.debug(id);
			layer_show(title,url + '?' + id, w, h);
		}
		
		
		/*用户-查询*/
		$('#searchbutton').click(function(){
			$('#sample-table').empty();
			var association_province =$("#association_province").val();					
			oTable1 = $('#sample-table').dataTable({
				"destroy": true,
				"aaSorting": [[1, "desc"]], //默认第几个排序
				"searching": false, //右边输入框关闭
				"bStateSave": true, //状态保存
				"ajax": {
					 "url": "http://localhost:8080/aamsystem/alumnusassociation/getsearchassociation",
		            "data":{
		                'association_province':association_province		                
		            },
		            "dataSrc": ""
		        },
		        "columns": [
					{
					    "sClass": "text-center",
					    "data": "ID",
					    "render": function (data, type, full, meta) {
					        return '<label><input type="checkbox" class="ace"><span class="lbl"></span></label>';
					    },
					    "bSortable": false
					},
					 { "data": "association_id" },
			         { "data": "association_chairman" },
			         { "data": "association_name" },
			         { "data": "association_createtime" },
			         { "data": "association_province" },
			         { "data": "association_address" },
			         { "data": "association_number" }
		        ],
				"aoColumnDefs": [
					{ "orderable": false, "aTargets": [0, 2, 3, 4, 5, 6, 7, 8] }, // 制定列不参与排序				
					{
	                    "targets":8,
	                    "class": "td-manage",
	                    "data": null,
	                    "bSortable": false,
	                    "defaultContent": "<a title='查看' href='javascript:;' class='showinfo btn btn-xs btn-info'><i class='icon-eye-open bigger-120'></i></a>",
	                } 
				]
			});
		});
		
		
		$('table th input:checkbox').on(
				'click',
				function() {
					var that = this;
					$(this).closest('table').find(
							'tr > td:first-child input:checkbox').each(
							function() {
								this.checked = that.checked;
								$(this).closest('tr').toggleClass('selected');
							});

				});
		//				$('[data-rel="tooltip"]').tooltip({placement: tooltip_placement});
		function tooltip_placement(context, source) {
			var $source = $(source);
			var $parent = $source.closest('table')
			var off1 = $parent.offset();
			var w1 = $parent.width();

			var off2 = $source.offset();
			var w2 = $source.width();

			if (parseInt(off2.left) < parseInt(off1.left) + parseInt(w1 / 2))
				return 'right';
			return 'left';
		}
	})
	/*用户-编辑*/
	function member_edit(id) {
		layer.open({
			type : 1,
			title : '修改用户信息',
			maxmin : true,
			shadeClose : false, //点击遮罩关闭层
			area : [ '800px', '' ],
			content : $('#add_menber_style'),
			btn : [ '提交', '取消' ],
			yes : function(index, layero) {
				var num = 0;
				var str = "";
				$(".add_menber input[type$='text']").each(
						function(n) {
							if ($(this).val() == "") {

								layer.alert(str += "" + $(this).attr("name")
										+ "不能为空！\r\n", {
									title : '提示框',
									icon : 0,
								});
								num++;
								return false;
							}
						});
				if (num > 0) {
					return false;
				} else {
					layer.alert('添加成功！', {
						title : '提示框',
						icon : 1,
					});
					layer.close(index);
				}
			}
		});
	}

	function checkLength(which) {
		var maxChars = 200; //
		if (which.value.length > maxChars) {
			layer.open({
				icon : 2,
				title : '提示框',
				content : '您出入的字数超多限制!',
			});
			// 超过限制的字数了就将 文本框中的内容按规定的字数 截取
			which.value = which.value.substring(0, maxChars);
			return false;
		} else {
			var curr = maxChars - which.value.length; //250 减去 当前输入的
			document.getElementById("sy").innerHTML = curr.toString();
			return true;
		}
	};

	//面包屑返回值
	var index = parent.layer.getFrameIndex(window.name);
	parent.layer.iframeAuto(index);
	$('.Order_form ,.ads_link').on('click', function() {
		var cname = $(this).attr("title");
		var cnames = parent.$('.Current_page').html();
		var herf = parent.$("#iframe").attr("src");
		parent.$('#parentIframe span').html(cname);
		parent.$('#parentIframe').css("display", "inline-block");
		parent.$('.Current_page').attr("name", herf).css({
			"color" : "#4c8fbd",
			"cursor" : "pointer"
		});
		//parent.$('.Current_page').html("<a href='javascript:void(0)' name="+herf+">" + cnames + "</a>");
		parent.layer.close(index);

	});

	/*用户-查看*/
	function member_show(title, url, id, w, h) {
		layer_show(title, url + '#?=' + id, w, h);
	}

	function AdlistOrders(id) {
		window.location.href = "Ads_list.html?=" + id;
	};
	laydate({
		elem : '#start',
		event : 'focus'
	});
</script>